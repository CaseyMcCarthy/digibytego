<ion-view id="assets" show-tabs>

  <ion-nav-bar class="bar-royal">
    <ion-nav-title>Assets</ion-nav-title>
    <ion-nav-back-button style="display: block">
    </ion-nav-back-button>
    <ion-nav-buttons side="secondary">
        <button class="button back-button" ng-click="getAssets()">
          Refresh
        </button>
      </ion-nav-buttons>
  </ion-nav-bar>

  <ion-content class="padding">
    <ion-refresher
      ng-if="isAndroid"
      pulling-icon="ion-ios-refresh"
      spinner="ios-small"
      on-refresh="onRefresh()">
    </ion-refresher>
    <div class="cc-assets-list-view">
        <div class="cc-assets-list" ng-show="assets">
            <div ng-repeat="asset in assets | orderBy:['assetName', 'utxo.txid']"
                ng-click="openAssetModal(asset)"
                style="display: flex; background-color: #fff; padding: 10px; cursor: pointer; border-bottom: 1px solid #A9A9A9; margin-bottom: 3px; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);;">
                <div class="cc-asset-icon-column text-center" style="flex-basis: 5%">
                    <img ng-src="{{ asset.icon }}" class="asset-icon icon" ng-show="asset.icon"/>
                    <img class="asset-icon icon cc-default-icon" ng-hide="asset.icon"/>
                    &nbsp;
                </div>
                <div class="cc-asset-name-column" style="flex-basis: 50%">
                    <div>
                        <span class="text-bold size-16">{{ asset.metadata.assetName }}</span>
                    </div>
                    <div class="ellipsis text-gray size-14">
                        {{ asset.metadata.description }}
                    </div>
                </div>
                <div class="" style="flex-basis: 30%">
                    <span class="size-14"><span translate><b>Issuer</b></span>: {{ asset.metadata.issuer }}</span>
                </div>
                <div class="text-right" style="flex-basis: 15%">
                  <span class="size-16">
                    {{ asset.asset.amount }}
                    <i class="fi-lock" ng-show="asset.locked"></i>
                  </span>
                </div>
                <div class="text-right">
                    <i class="icon-arrow-right3 size-18"></i>
                </div>
            </div>
        </div>
        <div class="cc-api-error" ng-show="error" style="text-align: center">
            <h3 translate>Error connecting to DigiAssets</h3>
            <span class="nb">{{ error }}</span>
        </div>
        <div class="cc-no-assets" ng-show="assets && assets.length == 0" style="text-align: center">
            <h3 translate>You don't have any assets.</h3>
            <div>Click below to issue an asset and get started!</div>
            <span class="nb">(<span translate>This requires some DigiBytes for the miner fee</span>)</span>
        </div>
        <div class="issue-assets-btn" style="margin-top: 15px">
            <button ng-click="openIssueModal()" class="button black expand round size-12 text-spacing"
                style="width: 100%; background-color: #0066cc; color: #fff;font-size: 1.2em;" translate>
                Issue New Asset
            </button>
        </div>
    </div>
  </ion-content>
</ion-view>