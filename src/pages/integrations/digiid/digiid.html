<ion-header>
  <ion-navbar>
    <ion-title>Digi-ID History</ion-title>
  </ion-navbar>
</ion-header>

<ion-content no-bounce>
  <ion-list *ngIf="history && history[0]" class="auth-history">
    <div *ngFor="let auth of history; trackBy: trackByFn; let i = index">

      <button ion-item >
        <ion-icon item-start>
          <div *ngIf="auth.success">
            <span>
                <img class="icon-services" src="assets/img/success.svg"  width="40">
            </span>
          </div>
          <div *ngIf="!auth.success">
              <span>
                  <img class="icon-services" src="assets/img/cancel.svg"  width="40">
              </span>
            </div>
        </ion-icon>

        <ion-note item-end text-end>
          <div class="url">
            <span>{{getURL(auth.uri)}}</span>
          </div>
          <div class="date">
            <span>{{auth.time * 1000 | amDateFormat:'MMM d, YYYY, hh:mm a'}}</span>
          </div>
        </ion-note>
      </button>
    </div>
  </ion-list>
  <div class="middle-message" *ngIf="!history || !history.length">
    <span>No Digi-ID Authentication requests have been received by this wallet yet.</span>
  </div>
</ion-content>

<ion-footer>
  <ion-item-divider class="selector-label" *ngIf="wallet">
    {{'Wallet selected' | translate}}
  </ion-item-divider>
  <button ion-item detail-none *ngIf="wallets && wallets[0]" (click)="showWallets()">
    <ion-icon item-start>
      <img *ngIf="wallet.network == 'testnet'" [ngStyle]="{'background-color': wallet.color}" src="assets/img/icon-wallet-testnet.svg" class="icon-wallet" />
      <img *ngIf="wallet.network != 'testnet'" [ngStyle]="{'background-color': wallet.color}" src="assets/img/icon-wallet.svg" class="icon-wallet" />
    </ion-icon>
    <div class="item-title">{{wallet.name}}</div>
    <div class="item-subtitle">
      <span class="wallet-warning" *ngIf="!wallet.isComplete()" translate>
        Incomplete
      </span>
      <span class="wallet-warning" *ngIf="wallet.isComplete() && wallet.needsBackup" translate>
        Needs backup
      </span>
      <span *ngIf="wallet.isComplete() && !wallet.needsBackup">
        <span>
          Ready To be used with Digi-ID
        </span>
        <ion-icon ios="ios-timer-outline" md="md-timer"></ion-icon>
      </span>
    </div>
    <div item-end>
      <button ion-button clear color="grey" icon-only>
        <ion-icon *ngIf="!isOpenSelector" name="ios-arrow-down-outline"></ion-icon>
        <ion-icon *ngIf="isOpenSelector" name="ios-arrow-up-outline"></ion-icon>
      </button>
    </div>
  </button>
</ion-footer>